{% extends "base.html" %}
{% load static wagtailimages_tags wagtailcore_tags %}

{% block body_class %}template-homepage{% endblock body_class %}
{% block extra_css %}{% endblock extra_css %}
{% block content %}
{% if request.user.is_authenticated %}
<!-- Section-PROJECT-PAGE -->
<section class="py-1">
    <div class="container px-4 px-lg-5 my-1">
        <div class="row gx-4 gx-lg-5 align-items-center">
            <div class="col-md-4">
                {% image page.get_parent.specific.representative_image max-600x700 as tizer %}
                <img class="card-img-top mb-5 mb-md-0" src="{{ tizer.url }}" alt="{{ project.title }}" /></div>
            <div class="col-md-8">
                <div class="small mb-1">Created: {{ page.specific.folder_date }}</div>
                <h1 class="display-5 fw-bolder"> {{ page.title }}</h1><br>
                <p class="lead">{{ page.specific.description | safe }}</p>
            </div>
        </div>
    </div>
    </section>
{# files folders #}
<div class="container">
    {% for folder_item in self.get_children.live %}

        <div class="px-4">
            {% if forloop.first %}Folders:<br>  {% endif %}
            <div class="panel panel-default folder-panel">
                <div class="panel-body">
                <a href="{{folder_item.url}}" class="link-dark">{{folder_item.title}}</a>
                </div>
            </div>
        </div>
        {% if forloop.last %} {% else %}<br> {% endif %}
        {%endfor%}
    </div>
{# end files folders #}
{# files list #}
    <div class="container">
         {%for file_item in self.file_in_folder.all%}
        <div class="px-4">
            {% if forloop.first %}Files:<br>  {% endif %}
            <div class="file-panel">

                {%if file_item.can_preview%}
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-image-fill" viewBox="0 0 16 16">
                          <path d="M.002 3a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-12a2 2 0 0 1-2-2V3zm1 9v1a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V9.5l-3.777-1.947a.5.5 0 0 0-.577.093l-3.71 3.71-2.66-1.772a.5.5 0 0 0-.63.062L1.002 12zm5-6.5a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0z"/>
                        </svg>&nbsp;
                {%else%}
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-download" viewBox="0 0 16 16">
                          <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"/>
                          <path d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z"/>
                        </svg>
                {%endif%}
                  {{file_item.name}} <a target="_blank"  href="{{file_item.file.url}}" class="link-dark" download="{{file_item.name}}">Download </a>
                ({{file_item.file.size|filesizeformat}})
            </div>
        </div>
        {% if forloop.last %} {% else %}<br> {% endif %}
        {%endfor%}
    </div>
{# end files list #}
<br>
{# object name and id #}
{%if user.is_superuser %}
<a class="btn btn-primary" href="/editproject/uploadprojectfiles/{{self.pk}}" role="button">Upload</a>
{%endif%}
{% else %}
<div class="container justify-content-center">
    <p>You are not logged in. Please, <a href="/login/">login</a></p>
</div>
{% endif %}
{% endblock content %}
